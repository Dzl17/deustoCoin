{% extends "basetabs.html" %} {% block body %}
<div class="d-flex justify-content-between flex-wrap flex-md-nowrap align-items-center pb-2 mb-3 border-bottom">
    <h1 class="h2">Cartera</h1>
    <div class="btn-toolbar mb-2 mb-md-0">
        <div class="btn-group mr-2">
            <button class="btn btn-sm btn-outline-secondary">Share</button>
            <button class="btn btn-sm btn-outline-secondary">Export</button>
        </div>
        <button class="btn btn-sm btn-outline-secondary dropdown-toggle">
      <svg
        xmlns="http://www.w3.org/2000/svg"
        width="24"
        height="24"
        viewBox="0 0 24 24"
        fill="none"
        stroke="currentColor"
        stroke-width="2"
        stroke-linecap="round"
        stroke-linejoin="round"
        class="feather feather-calendar"
      >
        <rect x="3" y="4" width="18" height="18" rx="2" ry="2"></rect>
        <line x1="16" y1="2" x2="16" y2="6"></line>
        <line x1="8" y1="2" x2="8" y2="6"></line>
        <line x1="3" y1="10" x2="21" y2="10"></line>
      </svg>
      This week
    </button>
    </div>
</div>
<div class="view">
    <div class="jumbotron">
        <h2>¡Hola, {{ name }}!</h2>
        <h2>
            <span style="font-size: 1rem">Número de bloque: <b>{{w3.eth.blockNumber}}</b></span
      >
    </h2>
    <h2>
      <span style="font-size: 1rem"
        >Tu saldo actual es de <b>{{ wallet * 1000 }}</b> UDC.</span
      ><br />
    </h2>
    <p><button class="btn btn-primary btn-large" id="mostrarformudc">Enviar UDC</button>&nbsp;<button class="btn btn-primary btn-large" id="mostrartransacciones">Mostrar transacciones</button>&nbsp;<button class="btn btn-primary btn-large" id="mostrarcampanyas">Mostrar campañas</button></p>
  </div>
  <form style="display: none;" id="udcform" method="POST">
    {{ form.csrf_token }}
    <div class="form-group">
      <p>
        <label for="exampleInputEmail1">{{form.destino.label}}</label>
        
        <br />
        {{form.destino(class="form-control")}}
      </p>
    </div>
    <div class="form-group">
      {{form.cantidad.label}}
      <br />
      {{form.cantidad(class="form-control")}}
    </div>
    <p>
      {{form.submit()}}
    </p>
    </form>
</div>
<div id="transacciones" style="display: none;">
  {% if transacciones|length >= 1 %}
  <table class="table">
    <thead>
      <tr>
        <th scope="col">Fecha</th>
        <th scope="col">Código</th>
        <th scope="col">Remitente</th>
        <th scope="col">Destinatario</th>
        <th scope="col">Cantidad</th>

      </tr>
    </thead>
    <tbody>
      {% for t in transacciones %}
      <tr>
        <th scope="row">{{t.fecha}}</th>
        <td>{{t.transHash}}</td>
        <td>{{t.remitente}}</td>
        <td>{{t.destinatario}}</td>
        <td>{{t.cantidad}}</td>
      </tr>
      {% endfor %}
    </tbody>
  </table>
  {% else %}
  <h4>No hay transacciones para mostrar</h4>
  <p>El usuario no ha estado involucrado en ninguna transacción.</p>
  {% endif %}
</div>
<div id="campanyas" style="display: none;">
  {% if campanyas|length >= 1 %}
  <table class="table">
    <thead>
      <tr>
        <th scope="col">Nombre</th>
        <th scope="col">Empresa</th>
        <th scope="col">Descripción</th>
        <th scope="col">Recompensa (en UDC)</th>
      </tr>
    </thead>
    <tbody>
      {% for c in campanyas %}
      <tr>
        <th scope="row">{{c.nombre}}</th>
        <td>{{c.empresa}}</td>
        <td>{{c.descripcion}}</td>
        <td>{{c.recompensa}}</td>
      </tr>
      {% endfor %}
    </tbody>
  </table>
  {% else %}
  <h4>No hay campañas vigentes de momento.</h4>
  <p>El usuario no ha estado involucrado en ninguna transacción.</p>
  {% endif %}
</div>

<script>
  $(document).ready(function(){
    $("#mostrarformudc").click(function(){
      $("#udcform").show();
    });
  });
  </script>
  <script>
  $(document).ready(function(){
    $("#mostrartransacciones").click(function(){
      $("#transacciones").show();
    });
  });
  </script>
  <script>
    $(document).ready(function(){
      $("#mostrarcampanyas").click(function(){
        $("#campanyas").show();
      });
    });
    </script>
{% endblock %}